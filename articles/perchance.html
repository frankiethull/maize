<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>perchance • maize</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="perchance">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">maize</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.95</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/ensembling_weak_learners.html">ensembling weak learners in maize</a></li>
    <li><a class="dropdown-item" href="../articles/extending_kernlab_support.html">new engines in maize</a></li>
    <li><a class="dropdown-item" href="../articles/glass-gem.html">glass-gem</a></li>
    <li><a class="dropdown-item" href="../articles/harvestime.html">harvestime</a></li>
    <li><a class="dropdown-item" href="../articles/perchance.html">perchance</a></li>
    <li><a class="dropdown-item" href="../articles/pre-processors-in-maize.html">pre-processors in maize</a></li>
    <li><a class="dropdown-item" href="../articles/SVMs.html">SVMs</a></li>
    <li><a class="dropdown-item" href="../articles/two-class-post-processing.html">two-class-post-processing</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>perchance</h1>
            
      

      <div class="d-none name"><code>perchance.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="post-processing-in-maize">Post-Processing in {maize}???<a class="anchor" aria-label="anchor" href="#post-processing-in-maize"></a>
</h3>
<p><strong>based entirely on the {probably} package implementation for
conformal inference &amp; calibration. Hence the pun perchance?
</strong></p>
<p>The {probably} package implements the int_conformal_quantile method
for generating prediction intervals. This method utilizes random forest
quantile regression as its underlying algorithm. In the {maize} package,
a new method called int_conformal_quantile_svm has been introduced. This
implementation replaces the original quantile regression random forest
{quantregForest} approach with a quantile regression SVM {qrsvm}. It’s
worth noting that the int_conformal_quantile_svm method relies on the
{qrsvm} package, which is currently not available on CRAN.</p>
<div class="section level4">
<h4 id="key-components">Key Components<a class="anchor" aria-label="anchor" href="#key-components"></a>
</h4>
<p>{probably} Package<br>
Method: int_conformal_quantile<br>
Algorithm: <code><a href="https://rdrr.io/pkg/quantregForest/man/quantregForest.html" class="external-link">quantregForest::quantregForest()</a></code></p>
<p>{maize} Package<br>
Method: int_conformal_quantile_svm<br>
Algorithm: <code><a href="https://rdrr.io/pkg/qrsvm/man/qrsvm.html" class="external-link">qrsvm::qrsvm()</a></code></p>
</div>
<div class="section level4">
<h4 id="implementation-details">Implementation Details<a class="anchor" aria-label="anchor" href="#implementation-details"></a>
</h4>
<p>The int_conformal_quantile_svm method in {maize} represents a
straightforward substitution of the RF algorithm. Instead of using
random forests, it employs SVMs for generating prediction intervals.
This modification allows users to leverage the potential benefits of
SVMs in certain prediction scenarios.</p>
</div>
<div class="section level4">
<h4 id="dependency-note">Dependency Note<a class="anchor" aria-label="anchor" href="#dependency-note"></a>
</h4>
<p>The {qrsvm} package, which is required for the SVM-based
implementation in {maize}, is not currently hosted on CRAN. Users
interested in utilizing the int_conformal_quantile_svm method should be
aware of this external dependency and may need to install it from
github.com/frankiethull/qrsvm.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">qrsvm</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/parsnip" class="external-link">parsnip</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://frankiethull.github.io/maize/">maize</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/recipes" class="external-link">recipes</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/workflows" class="external-link">workflows</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">kernlab</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/probably" class="external-link">probably</a></span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="point-and-interval-regressions">point and interval regressions<a class="anchor" aria-label="anchor" href="#point-and-interval-regressions"></a>
</h3>
<p>The following demonstration begins with an initial point forecast
using a Support Vector Machine (SVM) with a Laplacian kernel.
Subsequently, we utilize our out-of-bag (OOB) sample to construct
conformal prediction intervals. In this comparison, we will evaluate
both the int_conformal_quantile method from the {probably} package and
the int_conformal_quantile_svm method from the {maize} package. This
analysis will provide insights into the performance and characteristics
of these two approaches for generating prediction intervals.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">31415</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># note: qrsvm does not work for non-numeric values</span></span>
<span><span class="va">corn_df</span> <span class="op">&lt;-</span> <span class="va">corn_data</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">type</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">type</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">corn_train</span> <span class="op">&lt;-</span> <span class="va">corn_df</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html" class="external-link">sample_frac</a></span><span class="op">(</span><span class="fl">.80</span><span class="op">)</span></span>
<span><span class="va">corn_cal</span>   <span class="op">&lt;-</span> <span class="va">corn_df</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">anti_join</a></span><span class="op">(</span><span class="va">corn_train</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span></span>
<span><span class="va">corn_test</span>  <span class="op">&lt;-</span> <span class="va">corn_df</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">anti_join</a></span><span class="op">(</span><span class="va">corn_train</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># SVM base model </span></span>
<span><span class="va">svm_spec</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/svm_laplace.html">svm_laplace</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_args.html" class="external-link">set_mode</a></span><span class="op">(</span><span class="st">"regression"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">svm_wflow</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://workflows.tidymodels.org/reference/workflow.html" class="external-link">workflow</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://workflows.tidymodels.org/reference/add_model.html" class="external-link">add_model</a></span><span class="op">(</span><span class="va">svm_spec</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://workflows.tidymodels.org/reference/add_formula.html" class="external-link">add_formula</a></span><span class="op">(</span><span class="va">height</span> <span class="op">~</span> <span class="va">.</span><span class="op">)</span></span>
<span></span>
<span><span class="va">svm_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit</a></span><span class="op">(</span><span class="va">svm_wflow</span>, data <span class="op">=</span> <span class="va">corn_train</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># probably's implementation:</span></span>
<span><span class="va">rf_int</span> <span class="op">&lt;-</span> <span class="fu">probably</span><span class="fu">::</span><span class="fu"><a href="https://probably.tidymodels.org/reference/int_conformal_quantile.html" class="external-link">int_conformal_quantile</a></span><span class="op">(</span><span class="va">svm_fit</span>, <span class="va">corn_train</span>, <span class="va">corn_cal</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">0.80</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># experimental QRSVM interface for CQR: </span></span>
<span><span class="va">svm_int</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/int_conformal_quantile_svm.html">int_conformal_quantile_svm</a></span><span class="op">(</span><span class="va">svm_fit</span>, <span class="va">corn_train</span>, <span class="va">corn_cal</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">0.80</span>, cost <span class="op">=</span> <span class="fl">1000</span>, degree <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">svm_int</span></span>
<span><span class="co">#&gt; Split Conformal inference via Quantile Regression SVM</span></span>
<span><span class="co">#&gt; preprocessor: formula </span></span>
<span><span class="co">#&gt; model: svm_laplace (engine = kernlab) </span></span>
<span><span class="co">#&gt; calibration set size: 30 </span></span>
<span><span class="co">#&gt; confidence level: 0.8 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Use `predict(object, new_data)` to compute prediction intervals</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="predict-with-intervals">predict with intervals<a class="anchor" aria-label="anchor" href="#predict-with-intervals"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cqr_rf</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">rf_int</span>,  <span class="va">corn_test</span><span class="op">)</span></span>
<span><span class="va">cqr_svm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">svm_int</span>, <span class="va">corn_test</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># renaming pre-plotting</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cqr_rf</span><span class="op">)</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".pred"</span>, <span class="st">".pred_lo_rf"</span>,  <span class="st">".pred_hi_rf"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cqr_svm</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".pred"</span>, <span class="st">".pred_lo_svm"</span>, <span class="st">".pred_hi_svm"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="check-conformal-quantile-prediction-intervals">check conformal quantile prediction intervals<a class="anchor" aria-label="anchor" href="#check-conformal-quantile-prediction-intervals"></a>
</h3>
</div>
<div class="section level2">
<h2 id="svm-with-qrf-qrsvm-prediction-intervals">SVM with QRF &amp; QRSVM Prediction Intervals<a class="anchor" aria-label="anchor" href="#svm-with-qrf-qrsvm-prediction-intervals"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'ggplot2'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:kernlab':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     alpha</span></span>
<span></span>
<span><span class="va">corn_test</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_cols.html" class="external-link">bind_cols</a></span><span class="op">(</span><span class="va">cqr_svm</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_cols.html" class="external-link">bind_cols</a></span><span class="op">(</span><span class="va">cqr_rf</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">.pred</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">kernel_size</span>, ymin <span class="op">=</span> <span class="va">.pred_lo_svm</span>, ymax <span class="op">=</span> <span class="va">.pred_hi_svm</span>, fill <span class="op">=</span> <span class="st">"QR-SVM"</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">kernel_size</span>, ymin <span class="op">=</span> <span class="va">.pred_lo_rf</span>,  ymax <span class="op">=</span> <span class="va">.pred_hi_rf</span>,  fill <span class="op">=</span> <span class="st">"QR-RF"</span><span class="op">)</span>,  alpha <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">kernel_size</span>, y <span class="op">=</span> <span class="va">height</span>, color <span class="op">=</span> <span class="st">"truth"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">kernel_size</span>, y <span class="op">=</span> <span class="va">.pred</span>,  color <span class="op">=</span> <span class="st">"pred"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>subtitle <span class="op">=</span> <span class="st">"Corn Height Prediction Intervals"</span><span class="op">)</span></span></code></pre></div>
<p><img src="perchance_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="svm-with-linear-svm-calibration">SVM with Linear &amp; SVM Calibration<a class="anchor" aria-label="anchor" href="#svm-with-linear-svm-calibration"></a>
</h2>
<p>In addition to conformal prediction intervals, the {maize} package
offers a post-process calibration engine that is similar to the one in
{probably}, but utilizes Support Vector Machines (SVMs). The {probably}
package includes the cal_estimate_linear function, which calibrates
point forecasts using a post-model to address bias in the initial fit.
{maize} provides a comparable function called cal_estimate_svm. This
function follows a similar framework to cal_estimate_linear, but employs
either a vanilla or polynomial kernel, depending on the user’s selection
in the “smooth” argument. The following section demonstrates the
application of this calibration approach.</p>
<div class="section level4">
<h4 id="key-components-1">Key Components<a class="anchor" aria-label="anchor" href="#key-components-1"></a>
</h4>
<p>{probably} Package<br>
Method: cal_estimate_linear<br>
Algorithms:<br>
- <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">stats::glm()</a></code> is used when smooth is set to
<code>FALSE</code><br>
- <code><a href="https://rdrr.io/pkg/mgcv/man/gam.html" class="external-link">mgcv::gam()</a></code> is used when smooth is set to
<code>TRUE</code></p>
<p>{maize} Package<br>
Method: cal_estimate_svm<br>
Algorithms:<br>
- <code>kernlab::ksvm(kernel = "vanilladot")</code> is used when smooth
is set to <code>FALSE</code><br>
- <code>kernlab::ksvm(kernel = "polydot")</code> is used when smooth is
set to <code>TRUE</code></p>
</div>
<div class="section level4">
<h4 id="implementation-details-1">Implementation Details<a class="anchor" aria-label="anchor" href="#implementation-details-1"></a>
</h4>
<p>The cal_estimate_svm method in {maize} represents a straightforward
substitution of the linear calibration. Instead of using linear models,
it employs SVMs for post-calibration. This modification allows users to
leverage the potential benefits of SVMs in certain prediction
scenarios.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">calibration_df</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">svm_fit</span>, <span class="va">corn_cal</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_cols.html" class="external-link">bind_cols</a></span><span class="op">(</span><span class="va">corn_cal</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># probably's implementation:</span></span>
<span><span class="va">lin_cal_fit</span> <span class="op">&lt;-</span> <span class="va">calibration_df</span> <span class="op">|&gt;</span> </span>
<span>            <span class="fu">probably</span><span class="fu">::</span><span class="fu"><a href="https://probably.tidymodels.org/reference/cal_estimate_linear.html" class="external-link">cal_estimate_linear</a></span><span class="op">(</span>truth <span class="op">=</span> <span class="va">height</span>, estimate <span class="op">=</span> <span class="va">.pred</span>, smooth <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Registered S3 method overwritten by 'butcher':</span></span>
<span><span class="co">#&gt;   method                 from    </span></span>
<span><span class="co">#&gt;   as.character.dev_topic generics</span></span>
<span></span>
<span><span class="co"># experimental svm calibration (vanilladot or polydot)</span></span>
<span><span class="va">svm_cal_fit</span> <span class="op">&lt;-</span> <span class="va">calibration_df</span> <span class="op">|&gt;</span></span>
<span>            <span class="fu">maize</span><span class="fu">::</span><span class="fu"><a href="../reference/cal_estimate_svm.html">cal_estimate_svm</a></span><span class="op">(</span><span class="va">height</span>, smooth <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;  Setting default kernel parameters</span></span>
<span></span>
<span><span class="co"># preds</span></span>
<span><span class="va">cal_corn_test</span> <span class="op">&lt;-</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">svm_fit</span>, <span class="va">corn_test</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">corn_test</span><span class="op">)</span></span>
<span>  </span>
<span><span class="co"># calibrated preds:</span></span>
<span><span class="fu">maize</span><span class="fu">::</span><span class="fu">cal_apply_regression</span><span class="op">(</span><span class="va">svm_cal_fit</span>, <span class="va">cal_corn_test</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;       .pred   height kernel_size type</span></span>
<span><span class="co">#&gt; 1  64.42768 62.61279   11.051488    2</span></span>
<span><span class="co">#&gt; 2  65.53022 71.24822   10.629400    2</span></span>
<span><span class="co">#&gt; 3  66.25433 78.86852   11.401994    2</span></span>
<span><span class="co">#&gt; 4  68.00431 69.60042    9.926075    2</span></span>
<span><span class="co">#&gt; 5  66.04308 70.01313   11.738339    2</span></span>
<span><span class="co">#&gt; 6  70.82399 66.84150    9.685755    2</span></span>
<span><span class="co">#&gt; 7  70.70666 69.62163    9.648538    2</span></span>
<span><span class="co">#&gt; 8  67.20650 75.24819   10.028623    2</span></span>
<span><span class="co">#&gt; 9  66.54068 69.38940    8.890259    2</span></span>
<span><span class="co">#&gt; 10 68.10534 60.64923    9.923742    2</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Frank Hull.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
